<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>

<body style="background: #eee;">
    <script type="text/javascript">
        // 53. 最大子序和
        // 给定一个整数数组 nums ，找到一个具有最大和的连续子数组（子数组最少包含一个元素），返回其最大和。

        // 示例:

        // 输入: [-2,1,-3,4,-1,2,1,-5,4]
        // 输出: 6
        // 解释: 连续子数组 [4,-1,2,1] 的和最大，为 6。


        // var maxSubArray = function(nums) {
        //     for(let i = 1; i < nums.length; i++) {
        //         nums[i] = Math.max(nums[i], nums[i] + nums[i-1]);
        //     }
        //     return Math.max(...nums);
        // };

        var maxSubArray = function (nums) {
            let rs = nums.slice(), max = rs[0], index = 0, map = [];
            for(let i = 1; i < rs.length; i++) {
                if(i === 0) {
                    rs[i] = nums[i];
                } else {
                    if(rs[i - 1] < 0) {
                        rs[i] = nums[i];
                    } else {
                        rs[i] = rs[i - 1] + nums[i];
                    }
                    if(max < rs[i]) {
                        max = rs[i];
                        index = i;
                    }
                }
            }
            for(let i = index; i >= 0; i--) {
                if(rs[i] < 0) {
                    break;
                }
                map.unshift(nums[i]);
            }
            console.log(map);
            return max;
        };

        console.log(maxSubArray([-2, 1, -3, 4, -1, 2, 1, -5, 4]));
    </script>
</body>

</html>